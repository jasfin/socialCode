console.log("loaded");let createPost=function(){let e=$("#post-form");e.submit((function(o){o.preventDefault(),console.log("serialized newPostForm is",e.serialize()),$.ajax({type:"post",url:"/posts/create",data:e.serialize(),success:function(e){console.log("here22 data:",e);let o=postToDom(e.data.post);$("#posts-container>ul").prepend(o),console.log("calling createComment"),createComment(e.data.post._id),console.log("finished calling createComment"),console.log("calling deletePost for dom"),deletePost($(" .delete-post-button",o)),console.log("finished calling deletePost for dom")},error:function(e){console.log(e.responseText)}})}))},postToDom=function(e){return $(`<li id="post-${e._id}">\n            \n            <small>\n                <a class="delete-post-button" href="/posts/delete/${e._id}">X</a>\n            </small>\n\n            <p>\n             ${e.content}\n            <small>\n                ${e.user.name}\n            </small>\n            </p>\n        \n            <div class="post-comments">\n                <form action="/comments/create" id="comment-form-${e._id}" method="POST">\n                    <input type="text" name="content" placeholder="Add comment..." required>\n                    <input type="hidden" name="post" value="${e._id}" >\n                    <input type="submit" value="Add Comment">\n                </form>\n                \n                <div class="post-comments-list">\n                <ul id="post-comments-${e._id}">\n                    \n                </ul>\n                </div>\n            </div>\n        </li>`)},deletePost=function(e){$(e).click((function(o){o.preventDefault(),$.ajax({type:"get",url:$(e).prop("href"),success:function(e){console.log("here23 data:",e),$("#post-"+e.data.post_id).remove()},error:function(e){console.log(e.responseText)}})}))};createPost();